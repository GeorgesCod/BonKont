import { create } from 'zustand';
import { persist } from 'zustand/middleware';

export const languages = [
  { code: 'fr', name: 'FranÃ§ais', flag: 'ðŸ‡«ðŸ‡·' },
  { code: 'en', name: 'English', flag: 'ðŸ‡¬ðŸ‡§' }
];

const translations = {
  fr: {
    welcome: 'Bienvenue sur BONKONT',
    tagline: 'Les bons comptes font les bons amis',
    login: 'Connexion',
    register: 'Inscription',
    dashboard: 'Tableau de bord',
    statistics: 'Statistiques',
    getStarted: 'Commencer',
    loginPrompt: 'Connectez-vous pour gÃ©rer vos Ã©vÃ©nements partagÃ©s',
    changeLanguage: 'Changer de langue',
    currentLanguage: 'Langue actuelle',
    selectLanguage: 'SÃ©lectionner une langue',
    // Settings
    settings: 'ParamÃ¨tres',
    settingsDescription: 'GÃ©rez vos prÃ©fÃ©rences, votre compte et vos paramÃ¨tres de confidentialitÃ©',
    account: 'Compte',
    preferences: 'PrÃ©fÃ©rences',
    privacy: 'ConfidentialitÃ©',
    help: 'Aide',
    subscriptionPlan: 'Plan d\'abonnement',
    subscriptionDescription: 'Choisissez le plan qui correspond Ã  vos besoins',
    free: 'Gratuit',
    premium: 'Premium',
    pro: 'Pro',
    popular: 'Populaire',
    perMonth: '/mois',
    security: 'SÃ©curitÃ©',
    securityDescription: 'GÃ©rez la sÃ©curitÃ© de votre compte',
    resetPassword: 'RÃ©initialiser le mot de passe',
    generalPreferences: 'PrÃ©fÃ©rences gÃ©nÃ©rales',
    currency: 'Devise',
    language: 'Langue',
    languageDescription: 'La langue s\'applique aux pages publiques et aux paramÃ¨tres de confidentialitÃ©',
    appearance: 'Apparence',
    theme: 'ThÃ¨me',
    themeDescription: 'Choisissez entre le thÃ¨me clair et sombre',
    light: 'Clair',
    dark: 'Sombre',
    privacySecurity: 'ConfidentialitÃ© et sÃ©curitÃ©',
    privacyPolicy: 'Politique de confidentialitÃ©',
    privacyPolicyShort: 'ConfidentialitÃ©',
    termsOfService: 'Conditions GÃ©nÃ©rales d\'Utilisation',
    termsOfServiceShort: 'CGU',
    faq: 'Questions frÃ©quentes',
    faqShort: 'FAQ',
    contact: 'Contact',
    publicPages: 'Pages publiques',
    publicPagesDescription: 'AccÃ©dez aux pages d\'information et de support',
    support: 'Support et assistance',
    helpCenter: 'Centre d\'aide',
    logout: 'DÃ©connexion',
    deleteAccount: 'Supprimer mon compte',
    // Currency names
    eur: 'EUR (â‚¬)',
    usd: 'USD ($)',
    gbp: 'GBP (Â£)',
    // Messages
    currencyUpdated: 'Devise mise Ã  jour',
    currencyChanged: 'La devise a Ã©tÃ© changÃ©e en',
    languageUpdated: 'Langue mise Ã  jour',
    languageChanged: 'La langue a Ã©tÃ© changÃ©e en',
    themeUpdated: 'ThÃ¨me mis Ã  jour',
    themeChanged: 'Le thÃ¨me a Ã©tÃ© changÃ© en',
    planUpdated: 'Plan mis Ã  jour',
    planSubscribed: 'Vous avez souscrit au plan',
    emailSent: 'Email envoyÃ©',
    resetPasswordSent: 'Les instructions de rÃ©initialisation ont Ã©tÃ© envoyÃ©es Ã ',
    logoutSuccess: 'DÃ©connexion rÃ©ussie',
    logoutMessage: 'Vous avez Ã©tÃ© dÃ©connectÃ© avec succÃ¨s.',
    accountDeleted: 'Compte supprimÃ©',
    accountDeletedMessage: 'Votre compte a Ã©tÃ© supprimÃ© avec succÃ¨s.',
    // Confirmations
    confirmResetPassword: 'RÃ©initialiser le mot de passe',
    confirmResetPasswordDescription: 'Un email contenant les instructions de rÃ©initialisation sera envoyÃ© Ã  votre adresse email. ÃŠtes-vous sÃ»r de vouloir continuer ?',
    confirmLogout: 'DÃ©connexion',
    confirmLogoutDescription: 'ÃŠtes-vous sÃ»r de vouloir vous dÃ©connecter ?',
    confirmDeleteAccount: 'Supprimer mon compte',
    confirmDeleteAccountDescription: 'Cette action est irrÃ©versible. Toutes vos donnÃ©es seront dÃ©finitivement supprimÃ©es. ÃŠtes-vous absolument sÃ»r de vouloir supprimer votre compte ?',
    cancel: 'Annuler',
    sendEmail: 'Envoyer l\'email',
    deletePermanently: 'Supprimer dÃ©finitivement',
    // Subscription features
    upTo3Events: 'Jusqu\'Ã  3 Ã©vÃ©nements',
    basicSupport: 'Support de base',
    essentialFeatures: 'FonctionnalitÃ©s essentielles',
    unlimitedEvents: 'Ã‰vÃ©nements illimitÃ©s',
    prioritySupport: 'Support prioritaire',
    advancedPdfExport: 'Export PDF avancÃ©',
    detailedStats: 'Statistiques dÃ©taillÃ©es',
    allPremium: 'Tout Premium',
    customApi: 'API personnalisÃ©e',
    dedicatedSupport: 'Support dÃ©diÃ©',
    advancedFeatures: 'FonctionnalitÃ©s avancÃ©es',
    // Common
    back: 'Retour',
    taglineFooter: 'Bonkont fait les comptes. Les amis font le reste.',
    // Privacy Policy
    privacyTitle: 'Politique de confidentialitÃ©',
    privacyIntroTitle: '1. Introduction',
    privacyIntro1: 'Bonkont est une application de gestion et de partage de frais lors d\'Ã©vÃ©nements privÃ©s (voyages, sorties, projets collectifs).',
    privacyIntro2: 'La protection de vos donnÃ©es personnelles est une prioritÃ©.',
    privacyIntro3: 'Cette politique explique quelles donnÃ©es sont collectÃ©es, pourquoi, et comment elles sont protÃ©gÃ©es.',
    privacyDataTitle: '2. DonnÃ©es collectÃ©es',
    privacyDataIntro: 'Bonkont collecte uniquement les donnÃ©es nÃ©cessaires au bon fonctionnement de l\'application :',
    privacyDataAccount: 'DonnÃ©es de compte',
    privacyDataAccountEmail: 'Adresse e-mail',
    privacyDataAccountName: 'Nom ou pseudonyme',
    privacyDataAccountId: 'Identifiant utilisateur',
    privacyDataEvent: 'DonnÃ©es liÃ©es aux Ã©vÃ©nements',
    privacyDataEventName: 'Nom de l\'Ã©vÃ©nement',
    privacyDataEventCode: 'Code Ã©vÃ©nement',
    privacyDataEventParticipants: 'Participants',
    privacyDataEventTransactions: 'Transactions (montants, dates, payeur, participants concernÃ©s)',
    privacyDataEventValidations: 'Validations collectives',
    privacyDataInvoice: 'DonnÃ©es issues du scan de factures',
    privacyDataInvoiceOcr: 'Texte extrait automatiquement (OCR)',
    privacyDataInvoiceDetails: 'Montant, enseigne, date, heure',
    privacyDataNoBank: 'Aucune donnÃ©e bancaire n\'est stockÃ©e par Bonkont.',
    privacyUsageTitle: '3. Utilisation des donnÃ©es',
    privacyUsageIntro: 'Les donnÃ©es sont utilisÃ©es uniquement pour :',
    privacyUsage1: 'gÃ©rer les Ã©vÃ©nements et rÃ©partitions de frais',
    privacyUsage2: 'calculer les soldes et Ã©quilibres',
    privacyUsage3: 'gÃ©nÃ©rer des rÃ©capitulatifs et PDF',
    privacyUsage4: 'assurer la transparence entre participants',
    privacyUsageNoSale: 'Aucune donnÃ©e n\'est revendue ni utilisÃ©e Ã  des fins commerciales externes.',
    privacySharingTitle: '4. Partage des donnÃ©es',
    privacySharing1: 'Les donnÃ©es d\'un Ã©vÃ©nement sont visibles uniquement par les participants concernÃ©s',
    privacySharing2: 'Aucun partage avec des tiers non autorisÃ©s',
    privacySharing3: 'Aucun affichage public',
    privacyRetentionTitle: '5. Conservation des donnÃ©es',
    privacyRetention1: 'Les donnÃ©es sont conservÃ©es tant que le compte est actif',
    privacyRetention2: 'Les Ã©vÃ©nements clÃ´turÃ©s restent accessibles Ã  des fins de consultation',
    privacyRetention3: 'L\'utilisateur peut demander la suppression de son compte et de ses donnÃ©es',
    privacySecurityTitle: '6. SÃ©curitÃ©',
    privacySecurityIntro: 'Bonkont met en Å“uvre des mesures techniques et organisationnelles pour protÃ©ger les donnÃ©es :',
    privacySecurity1: 'accÃ¨s sÃ©curisÃ©',
    privacySecurity2: 'sÃ©paration des Ã©vÃ©nements',
    privacySecurity3: 'validation collective avant clÃ´ture',
    privacyRightsTitle: '7. Vos droits',
    privacyRightsIntro: 'ConformÃ©ment au RGPD, vous disposez des droits suivants :',
    privacyRights1: 'accÃ¨s Ã  vos donnÃ©es',
    privacyRights2: 'rectification',
    privacyRights3: 'suppression',
    privacyRights4: 'limitation du traitement',
    privacyContact: 'Contact : contact@bonkont.app',
    // Terms of Service
    termsTitle: 'Conditions GÃ©nÃ©rales d\'Utilisation',
    termsObjectTitle: '1. Objet',
    termsObject1: 'Les prÃ©sentes CGU dÃ©finissent les conditions d\'utilisation de l\'application Bonkont.',
    termsObject2: 'Bonkont est un outil de gestion et de rÃ©partition de frais, sans rÃ´le d\'intermÃ©diaire financier.',
    termsAccessTitle: '2. AccÃ¨s Ã  l\'application',
    termsAccess1: 'L\'accÃ¨s Ã  un Ã©vÃ©nement se fait via un code Ã©vÃ©nement',
    termsAccess2: 'Seuls les participants invitÃ©s peuvent consulter ou interagir avec l\'Ã©vÃ©nement',
    termsFunctioningTitle: '3. Fonctionnement des Ã©vÃ©nements',
    termsFunctioning1: 'Le budget et la durÃ©e sont dÃ©finis Ã  la crÃ©ation',
    termsFunctioning2: 'Les transactions peuvent concerner tout ou partie des participants',
    termsFunctioning3: 'Chaque transaction nÃ©cessite une validation collective',
    termsFunctioning4: 'La clÃ´ture de l\'Ã©vÃ©nement est soumise :',
    termsFunctioning4a: 'Ã  un temps de rÃ©flexion',
    termsFunctioning4b: 'Ã  la validation des participants',
    termsResponsibilitiesTitle: '4. ResponsabilitÃ©s',
    termsResponsibilitiesBonkont: 'Bonkont :',
    termsResponsibilitiesBonkont1: 'ne gÃ¨re pas les paiements bancaires',
    termsResponsibilitiesBonkont2: 'ne garantit pas l\'exactitude des informations saisies par les utilisateurs',
    termsResponsibilitiesBonkont3: 'fournit des calculs automatiques basÃ©s sur les donnÃ©es validÃ©es',
    termsResponsibilitiesUsers: 'Les utilisateurs restent responsables :',
    termsResponsibilitiesUsers1: 'des montants saisis',
    termsResponsibilitiesUsers2: 'des paiements effectuÃ©s entre eux',
    termsClosureTitle: '5. ClÃ´ture et rÃ©partition',
    termsClosureIntro: 'Une fois un Ã©vÃ©nement clÃ´turÃ© :',
    termsClosure1: 'les donnÃ©es sont figÃ©es',
    termsClosure2: 'un rÃ©capitulatif final est gÃ©nÃ©rÃ©',
    termsClosure3: 'la rÃ©partition est considÃ©rÃ©e comme acceptÃ©e collectivement',
    termsDeletionTitle: '6. Suppression de compte',
    termsDeletion1: 'L\'utilisateur peut supprimer son compte Ã  tout moment depuis les paramÃ¨tres.',
    // FAQ
    faqTitle: 'Questions frÃ©quentes',
    faqQ1: 'Qu\'est-ce que Bonkont ?',
    faqA1: 'Bonkont est une application qui permet de partager des frais lors d\'un Ã©vÃ©nement, de maniÃ¨re transparente et collective.',
    faqQ2: 'Est-ce une application de paiement ?',
    faqA2: 'Non. Bonkont ne gÃ¨re pas les paiements bancaires. Elle aide Ã  calculer et Ã©quilibrer les dÃ©penses entre participants.',
    faqQ3: 'Faut-il crÃ©er un compte ?',
    faqA3: 'Oui, un compte est nÃ©cessaire pour participer Ã  un Ã©vÃ©nement et valider les transactions.',
    faqQ4: 'Pourquoi un temps de rÃ©flexion avant la clÃ´ture ?',
    faqA4: 'Pour Ã©viter les dÃ©cisions Ã  chaud et permettre Ã  chacun de vÃ©rifier les comptes sereinement.',
    faqQ5: 'Peut-on modifier un Ã©vÃ©nement aprÃ¨s clÃ´ture ?',
    faqA5: 'Non. Une fois clÃ´turÃ© et validÃ© collectivement, l\'Ã©vÃ©nement est figÃ©.',
    faqQ6: 'Les factures sont-elles conservÃ©es ?',
    faqA6: 'Les informations extraites servent au calcul. Les images ne sont pas utilisÃ©es Ã  d\'autres fins.',
    // Contact
    contactTitle: 'Contact',
    contactQuestion: 'Une question, une remarque ou un problÃ¨me ?',
    contactResponse: 'Nous rÃ©pondons avec attention Ã  chaque message.',
    contactHow: 'Comment nous contacter ?',
    contactHow1: 'Pour toute question concernant l\'utilisation de Bonkont, une demande d\'assistance technique, ou pour nous faire part de vos suggestions, n\'hÃ©sitez pas Ã  nous Ã©crire Ã  l\'adresse ci-dessus.',
    contactHow2: 'Nous nous engageons Ã  rÃ©pondre Ã  tous les messages dans les meilleurs dÃ©lais.'
  },
  en: {
    welcome: 'Welcome to BONKONT',
    tagline: 'Good accounts make good friends',
    login: 'Login',
    register: 'Register',
    dashboard: 'Dashboard',
    statistics: 'Statistics',
    getStarted: 'Get Started',
    loginPrompt: 'Login to manage your shared events',
    changeLanguage: 'Change language',
    currentLanguage: 'Current language',
    selectLanguage: 'Select a language',
    // Settings
    settings: 'Settings',
    settingsDescription: 'Manage your preferences, account and privacy settings',
    account: 'Account',
    preferences: 'Preferences',
    privacy: 'Privacy',
    help: 'Help',
    subscriptionPlan: 'Subscription Plan',
    subscriptionDescription: 'Choose the plan that suits your needs',
    free: 'Free',
    premium: 'Premium',
    pro: 'Pro',
    popular: 'Popular',
    perMonth: '/month',
    security: 'Security',
    securityDescription: 'Manage your account security',
    resetPassword: 'Reset Password',
    generalPreferences: 'General Preferences',
    currency: 'Currency',
    language: 'Language',
    languageDescription: 'The language applies to public pages and privacy settings',
    appearance: 'Appearance',
    theme: 'Theme',
    themeDescription: 'Choose between light and dark theme',
    light: 'Light',
    dark: 'Dark',
    privacySecurity: 'Privacy and Security',
    privacyPolicy: 'Privacy Policy',
    privacyPolicyShort: 'Privacy',
    termsOfService: 'Terms of Service',
    termsOfServiceShort: 'Terms',
    faq: 'Frequently Asked Questions',
    faqShort: 'FAQ',
    contact: 'Contact',
    publicPages: 'Public Pages',
    publicPagesDescription: 'Access information and support pages',
    support: 'Support and Assistance',
    helpCenter: 'Help Center',
    logout: 'Logout',
    deleteAccount: 'Delete my account',
    // Currency names
    eur: 'EUR (â‚¬)',
    usd: 'USD ($)',
    gbp: 'GBP (Â£)',
    // Messages
    currencyUpdated: 'Currency updated',
    currencyChanged: 'Currency changed to',
    languageUpdated: 'Language updated',
    languageChanged: 'Language changed to',
    themeUpdated: 'Theme updated',
    themeChanged: 'Theme changed to',
    planUpdated: 'Plan updated',
    planSubscribed: 'You have subscribed to the',
    emailSent: 'Email sent',
    resetPasswordSent: 'Reset instructions have been sent to',
    logoutSuccess: 'Logout successful',
    logoutMessage: 'You have been successfully logged out.',
    accountDeleted: 'Account deleted',
    accountDeletedMessage: 'Your account has been successfully deleted.',
    // Confirmations
    confirmResetPassword: 'Reset Password',
    confirmResetPasswordDescription: 'An email containing reset instructions will be sent to your email address. Are you sure you want to continue?',
    confirmLogout: 'Logout',
    confirmLogoutDescription: 'Are you sure you want to logout?',
    confirmDeleteAccount: 'Delete my account',
    confirmDeleteAccountDescription: 'This action is irreversible. All your data will be permanently deleted. Are you absolutely sure you want to delete your account?',
    cancel: 'Cancel',
    sendEmail: 'Send email',
    deletePermanently: 'Delete permanently',
    // Subscription features
    upTo3Events: 'Up to 3 events',
    basicSupport: 'Basic support',
    essentialFeatures: 'Essential features',
    unlimitedEvents: 'Unlimited events',
    prioritySupport: 'Priority support',
    advancedPdfExport: 'Advanced PDF export',
    detailedStats: 'Detailed statistics',
    allPremium: 'All Premium',
    customApi: 'Custom API',
    dedicatedSupport: 'Dedicated support',
    advancedFeatures: 'Advanced features',
    // Common
    back: 'Back',
    taglineFooter: 'Bonkont does the accounts. Friends do the rest.',
    // Privacy Policy
    privacyTitle: 'Privacy Policy',
    privacyIntroTitle: '1. Introduction',
    privacyIntro1: 'Bonkont is an application for managing and sharing expenses during private events (trips, outings, collective projects).',
    privacyIntro2: 'The protection of your personal data is a priority.',
    privacyIntro3: 'This policy explains what data is collected, why, and how it is protected.',
    privacyDataTitle: '2. Data Collected',
    privacyDataIntro: 'Bonkont collects only the data necessary for the proper functioning of the application:',
    privacyDataAccount: 'Account Data',
    privacyDataAccountEmail: 'Email address',
    privacyDataAccountName: 'Name or nickname',
    privacyDataAccountId: 'User identifier',
    privacyDataEvent: 'Event-related Data',
    privacyDataEventName: 'Event name',
    privacyDataEventCode: 'Event code',
    privacyDataEventParticipants: 'Participants',
    privacyDataEventTransactions: 'Transactions (amounts, dates, payer, concerned participants)',
    privacyDataEventValidations: 'Collective validations',
    privacyDataInvoice: 'Data from invoice scanning',
    privacyDataInvoiceOcr: 'Automatically extracted text (OCR)',
    privacyDataInvoiceDetails: 'Amount, merchant, date, time',
    privacyDataNoBank: 'No banking data is stored by Bonkont.',
    privacyUsageTitle: '3. Data Usage',
    privacyUsageIntro: 'Data is used only for:',
    privacyUsage1: 'managing events and expense sharing',
    privacyUsage2: 'calculating balances and settlements',
    privacyUsage3: 'generating summaries and PDFs',
    privacyUsage4: 'ensuring transparency between participants',
    privacyUsageNoSale: 'No data is sold or used for external commercial purposes.',
    privacySharingTitle: '4. Data Sharing',
    privacySharing1: 'Event data is visible only to the concerned participants',
    privacySharing2: 'No sharing with unauthorized third parties',
    privacySharing3: 'No public display',
    privacyRetentionTitle: '5. Data Retention',
    privacyRetention1: 'Data is retained as long as the account is active',
    privacyRetention2: 'Closed events remain accessible for consultation purposes',
    privacyRetention3: 'The user can request deletion of their account and data',
    privacySecurityTitle: '6. Security',
    privacySecurityIntro: 'Bonkont implements technical and organizational measures to protect data:',
    privacySecurity1: 'secure access',
    privacySecurity2: 'event separation',
    privacySecurity3: 'collective validation before closure',
    privacyRightsTitle: '7. Your Rights',
    privacyRightsIntro: 'In accordance with GDPR, you have the following rights:',
    privacyRights1: 'access to your data',
    privacyRights2: 'rectification',
    privacyRights3: 'deletion',
    privacyRights4: 'limitation of processing',
    privacyContact: 'Contact: contact@bonkont.app',
    // Terms of Service
    termsTitle: 'Terms of Service',
    termsObjectTitle: '1. Purpose',
    termsObject1: 'These Terms define the conditions of use of the Bonkont application.',
    termsObject2: 'Bonkont is a tool for managing and sharing expenses, without the role of a financial intermediary.',
    termsAccessTitle: '2. Application Access',
    termsAccess1: 'Access to an event is via an event code',
    termsAccess2: 'Only invited participants can view or interact with the event',
    termsFunctioningTitle: '3. Event Functioning',
    termsFunctioning1: 'Budget and duration are defined at creation',
    termsFunctioning2: 'Transactions can concern all or part of the participants',
    termsFunctioning3: 'Each transaction requires collective validation',
    termsFunctioning4: 'Event closure is subject to:',
    termsFunctioning4a: 'a reflection period',
    termsFunctioning4b: 'participant validation',
    termsResponsibilitiesTitle: '4. Responsibilities',
    termsResponsibilitiesBonkont: 'Bonkont:',
    termsResponsibilitiesBonkont1: 'does not manage bank payments',
    termsResponsibilitiesBonkont2: 'does not guarantee the accuracy of information entered by users',
    termsResponsibilitiesBonkont3: 'provides automatic calculations based on validated data',
    termsResponsibilitiesUsers: 'Users remain responsible for:',
    termsResponsibilitiesUsers1: 'entered amounts',
    termsResponsibilitiesUsers2: 'payments made between them',
    termsClosureTitle: '5. Closure and Distribution',
    termsClosureIntro: 'Once an event is closed:',
    termsClosure1: 'data is frozen',
    termsClosure2: 'a final summary is generated',
    termsClosure3: 'the distribution is considered collectively accepted',
    termsDeletionTitle: '6. Account Deletion',
    termsDeletion1: 'The user can delete their account at any time from the settings.',
    // FAQ
    faqTitle: 'Frequently Asked Questions',
    faqQ1: 'What is Bonkont?',
    faqA1: 'Bonkont is an application that allows sharing expenses during an event, in a transparent and collective manner.',
    faqQ2: 'Is it a payment application?',
    faqA2: 'No. Bonkont does not manage bank payments. It helps calculate and balance expenses between participants.',
    faqQ3: 'Do I need to create an account?',
    faqA3: 'Yes, an account is required to participate in an event and validate transactions.',
    faqQ4: 'Why a reflection period before closure?',
    faqA4: 'To avoid hasty decisions and allow everyone to check accounts calmly.',
    faqQ5: 'Can an event be modified after closure?',
    faqA5: 'No. Once closed and collectively validated, the event is frozen.',
    faqQ6: 'Are invoices kept?',
    faqA6: 'The extracted information is used for calculation. Images are not used for other purposes.',
    // Contact
    contactTitle: 'Contact',
    contactQuestion: 'A question, a remark or a problem?',
    contactResponse: 'We respond carefully to each message.',
    contactHow: 'How to contact us?',
    contactHow1: 'For any question regarding the use of Bonkont, a technical support request, or to share your suggestions, please do not hesitate to write to us at the address above.',
    contactHow2: 'We commit to responding to all messages as soon as possible.'
  }
};

export const useI18nStore = create(
  persist(
    (set, get) => ({
      currentLanguage: languages[0],
      setLanguage: (code) => {
        const language = languages.find(lang => lang.code === code);
        if (language) {
          set({ currentLanguage: language });
        }
      },
      t: (key) => {
        const { currentLanguage } = get();
        return translations[currentLanguage.code]?.[key] || translations.en[key] || key;
      }
    }),
    {
      name: 'bonkont-language'
    }
  )
);

export function detectBrowserLanguage() {
  const browserLang = navigator.language.split('-')[0];
  return languages.some(lang => lang.code === browserLang) ? browserLang : 'fr';
}